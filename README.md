# yd2



课 程 设 计 报 告

课程设计名称： 

课程设计题目： 

 
院（系）：计算机与信息工程学院 
专    业：软件工程 
班    级：2015网络编程
学    号：20151104685
姓    名：杨丁 
Github网址：ciec20151104685 
指导教师:朝力萌
完成日期：2016.7.14
 
目    录

第1章  概要设计	2
1.1题目的内容与要求	2
1.2总体结构	2
第2章  详细设计	2
2.1主模块	2
第3章  调试分析	3
第4章  使用说明与执行结果	4

 
第1章  概要设计
1.1题目的内容与要求
设计一个软件，可以从一个从手机GPS导出的.GPX文件中整齐整理出经度，维度，时间，如果显示在屏幕并且将整理出的内容输入到一个Excel表格，如果有能力则算出最大速度最小速度，并且绘制相应的轨迹。
1.2总体结构
只有一个查询对应字符并且输出的功能，所以只有一个主函数，完成了所有操作，如果需要添加算出最大最小速度的功能，绘制轨迹的功能，则可以再添加新的函数。


第2章  详细设计
2.1主模块
在头文件之后定义了一个主函数（int main），之后先定义各种变量（int len=0;int i=1;float lat;float lon;）以及指针（str,str1,strtime,strlat,strlon,fp,fp1）并且对其进行赋值，然后对需要读入的文件(export.gpx)以只读（r）的方式打开,对需要被写入数据的文件(date.csv)以只写(w)的方式打开，然后用一个if语句判断文件是否成功打开(fp==NULL&&fp1==NULL)来做出是否继续执行的判断，如果文件没有被打开那么直接中断程序exit(-1)如果被打开则执行else语句，在else语句中，先用fseek(fp,0,2)将指针移动到文件尾偏移零个单位处，再用ftell算出指针偏移量（）len，也就是文件总长度，之后再用rewind(fp);将文件指针移动到文件开头，并且为str,str1申请动态内存（malloc）,接着用fread将fp所指向文件读入到内存中（str所指），然后执行一个while!((*(str+flag)=='<')&&(*(str+flag+1)=='/')&&(*(str+flag+2)=='g'))循环语句，非遇到</gp时,执行循环体，在循环体中有一个if语句判断是否读到lat,如果读到lat先将指针移动到其后五位并且将其用拷贝到其对应的指针所申请的动态内存处(strncpy(str1,str+i+5,10)
,然后用print和fprint在显示器输出和写入到date.csv文件中，然后就可以整齐有序的输出所需要的数据，之后控制循环的变量自增（flag++;），再次循环。当遇到结束条件时跳出循环，关闭文件（fclose）再释放内存（free）.程序运行结束. 
第3章  调试分析
[Error] 'strlat' was not declared in this scope
Strlat没有被定义，所以我需要查看是否strlat没有被定义，或者是全局变量与局部变量的问题。

[Error] 'system' was not declared in this scope
System使用时忘记加头文件了，我需要加入相应的头文件.
[Error] expected ')' before '{' token
在while循环处有括号少加了
[Error] invalid conversion from 'void*' to 'char*' [-fpermissive]
若使用malloc函数类型转换不可丢
[Error] cannot convert 'const char*' to 'FILE*{aka _iobuf*}' for argument '1' to 'int fprintf(FILE*, const char*, ...)'
因为在fprintf中丢了指针，所以报错
第4章  使用说明与执行结果 
运行操作及结果:双击程序开始运行，之后程序会打开export.gpx筛选字符，然后创建一个date.cvs文件并把筛选出来的字符输入到文件中，同时屏幕也会显示被筛选出来的字符.
二．课程设计小结
  在实验中发现——分析——总结的问题有：
1.	代码书写规范以及变量命名问题：这是一个编程习惯问题，虽然与编程技术没有太大的关系但是确是很重要的一点，代码一片乱，没有相应的注释，变量名也没有实际意义，当代码量大的时候，包括自己也是很难阅读的，更别说他人对代码的阅读了，所以编程书写规范很重要.
2.	指针的使用很灵活但是需要很精确的定位，多一位少一位那么意味着输出的东西会莫名其妙多了奇怪的字符，并且在使用指针的时候要记着初始化，使用之后要记得释放内存，不正确的使用指针往往会出现一个意想不到的问题，最典型的就是地址冲突，使用使用指针一定要仔细.


参考文献：
[1]张丽萍.程序设计基础[M].北京：北京大学出版社，2014


  


